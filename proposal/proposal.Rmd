---
title: "Project proposal"
author: "Energyyy"
output: github_document
---

```{r load-packages, message = FALSE}
library(tidyverse)
library(broom)
```

## 1. Introduction

The United States of America has on of the most diverse electric grids in the world. With this many stakeholders it is interesting to know which factors affect electricity distribution and pricing to what extent in the US. We are looking into the data from the the U.S. Energy Information Administration (EIA). EIA collects, analyzes, and disseminates independent and impartial energy information. The utility companies are required to self-report this data due to regulations. The variables that we will be looking at are Ownership type, Customers (Count), Sales (Megawatt hours) Revenues (Thousands Dollars), and Average Price (cents/kWh).

RQ: 
Which factors affect electricity distribution and pricing to what extent in the US?
- black outs
- urban rural
- sectors
-seasons
- regional differences
- utility companies ownership


## 2. Data
```{r install packages}
library(readxl)
```

```{r read-data}
library(readxl)
table_Residential <- read_excel("/cloud/project/data/table_Residential.xlsx")
table_Commercial <- read_excel("/cloud/project/data/table_Commercial.xlsx")
table_Industrial <- read_excel("/cloud/project/data/table_Industrial.xlsx")
table_Transportation <- read_excel("/cloud/project/data/table_Transportation.xlsx") %>%
  mutate(`Average Price (cents/kWh)` == case_when(`Average Price (cents/kWh)` == "." ~ "NA"))
```

```{r "."-to-NA}
table_Residential <- read_excel("/cloud/project/data/table_Residential.xlsx") %>%
  mutate(`Average Price (cents/kWh)` = case_when(
    `Average Price (cents/kWh)` == "." ~ NA,
    TRUE                   ~ as.double(`Average Price (cents/kWh)`)
    ))
#this is just a preview of trying to get rid of the "." and change it to NA
```


```{r glimpse-data}
glimpse(table_Residential)
glimpse(table_Commercial)
glimpse(table_Industrial)
glimpse(table_Transportation)
```

```{r}
view(table_Transportation)
```

## 3. Ethics review

## 4. Data analysis plan

We will use all the mentioned variables in our analyses. 
There will be other data that we include in our analysis to visualize the data we already have, such as coordinates to locate the US states on a potential heatmap. In case we would like to expand our data analysis, we would go further into price developments per sector and US state potentially using data between 1960-2023. 

Priority list:
join data sets

Ownership vs price of electricity /acc to state 
```{r ownership-average-price-state}
ggplot(table_Residential, aes(x = Ownership, y = `Average Price (cents/kWh)`, color = State)) +
  geom_point()
```

- Profit vs price and actual blackouts and ownership (less profit and community owned means less blackouts?)
- Number of customers per utility company vs price 
- Per household consumption of electricity (megawatthours sold/customers) vs price and revenue (make revenue into categories to use the variable as e.g. color or shape in ggplot) per utility company
- Heatmap of electricity use
- Seasonal price variation vs average temperature, per month

